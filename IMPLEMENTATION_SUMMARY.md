# –°–≤–æ–¥–∫–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —Ä–∞—Å—á—ë—Ç–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π —Ñ–∞–π–ª `equipment_upgrades.json`
–°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –±–æ–Ω—É—Å–æ–≤ –æ—Ç —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏:
- Stone (I, II, III): HP +5/+10/+15, Armor +1/+2/+3, Damage +2/+4/+6
- Iron (I, II, III): HP +20/+25/+30, Armor +4/+5/+6, Damage +8/+10/+12
- Bronze (I, II, III): HP +40/+50/+60, Armor +8/+10/+12, Damage +16/+20/+24
- Silver (I, II, III): HP +80/+100/+120, Armor +16/+20/+24, Damage +32/+40/+48
- Gold (I, II, III): HP +160/+200/+240, Armor +32/+40/+48, Damage +64/+80/+96
- Diamond (I, II, III): HP +320/+400/+480, Armor +64/+80/+96, Damage +128/+160/+192

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ equipment_upgrades.json
–í —Ñ—É–Ω–∫—Ü–∏–∏ `syncAllData()` –¥–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤:
```javascript
await loadEquipmentUpgrades();
```

### 3. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `loadEquipmentUpgrades()`
–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –æ–± —ç–∫–∏–ø–∏—Ä–æ–≤–∫–µ –∏–∑ JSON —Ñ–∞–π–ª–∞.

### 4. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `getEquipmentTier(rarityName, level)`
–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–µ–∫—É—â–∏–π —Ç–∏—Ä –∏ —Ä–∞–Ω–≥ —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ:
- –£—Ä–æ–≤–Ω—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ (1-55)
- –†–µ–¥–∫–æ—Å—Ç–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ (Common ‚Üí Mythic)

–ú–∞–ø–ø–∏–Ω–≥ —É—Ä–æ–≤–Ω–µ–π ‚Üí —Ç–∏—Ä–æ–≤:
- Level 1: Stone III
- Level 2-8: Iron I-III
- Level 9-15: Bronze I-III
- Level 16-25: Silver I-III
- Level 26-40: Gold I-III
- Level 41-55: Diamond I-III

–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ —Ä–µ–¥–∫–æ—Å—Ç–∏:
- Common: –º–∞–∫—Å–∏–º—É–º Iron I
- Uncommon: –º–∞–∫—Å–∏–º—É–º Bronze I
- Rare: –º–∞–∫—Å–∏–º—É–º Silver I
- Epic: –º–∞–∫—Å–∏–º—É–º Gold I
- Legendary: –º–∞–∫—Å–∏–º—É–º Diamond I
- Mythic: –º–∞–∫—Å–∏–º—É–º Diamond III

### 5. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `getEquipmentBonuses(rarityName, level)`
–†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç **–Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω—ã–µ** –±–æ–Ω—É—Å—ã –æ—Ç —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏:
- –°—É–º–º–∏—Ä—É–µ—Ç –í–°–ï —Ç–∏—Ä—ã –∏ —Ä–∞–Ω–≥–∏ –¥–æ —Ç–µ–∫—É—â–µ–≥–æ
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç: `{ hp, armor, damage }`

–ü—Ä–∏–º–µ—Ä –¥–ª—è Epic Level 28 (Gold II):
```
HP: 5+10+15 + 20+25+30 + 40+50+60 + 80+100+120 + 160+200 = 875
Armor: 1+2+3 + 4+5+6 + 8+10+12 + 16+20+24 + 32+40 = 183
Damage: 2+4+6 + 8+10+12 + 16+20+24 + 32+40+48 + 64+80 = 366
```

### 6. –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `getCharacterStatsFromData()`
–¢–µ–ø–µ—Ä—å –¥–æ–±–∞–≤–ª—è–µ—Ç –±–æ–Ω—É—Å—ã –æ—Ç —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏ –∫ –±–∞–∑–æ–≤—ã–º/—Ç–∞–±–ª–∏—á–Ω—ã–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º:
```javascript
const equipmentBonuses = getEquipmentBonuses(rarityName, level);

return {
    hp: hp + equipmentBonuses.hp,
    armor: armor + equipmentBonuses.armor,
    dmg: dmg + equipmentBonuses.damage
};
```

### 7. –ü–û–õ–ù–û–°–¢–¨–Æ –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `updateMetricsOnly()`
–¢–µ–ø–µ—Ä—å –æ–±–Ω–æ–≤–ª—è–µ—Ç –í–°–ï —ç–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –ø–æ–ª–∑—É–Ω–∫–æ–≤:

#### –û–±–Ω–æ–≤–ª—è–µ–º—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:
1. **–õ–µ–π–±–ª—ã –ø–æ–ª–∑—É–Ω–∫–æ–≤** - –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç —Ç–µ–∫—É—â—É—é —Ä–µ–¥–∫–æ—Å—Ç—å –∏ —É—Ä–æ–≤–µ–Ω—å
2. **–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π** - HP, Armor, DMG (–≤–µ—Ä—Ö–Ω–∏–µ –±–ª–æ–∫–∏)
3. **–ú–µ—Ç—Ä–∏–∫–∞ "–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∞—Ç–∞–∫–∏"** - –ø—Ä–æ—Ü–µ–Ω—Ç, –∑–Ω–∞—á–µ–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ
4. **–ú–µ—Ç—Ä–∏–∫–∞ "–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∑–∞—â–∏—Ç—ã"** - –ø—Ä–æ—Ü–µ–Ω—Ç, –∑–Ω–∞—á–µ–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ
5. **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Ä–∞–∑–º–µ–Ω–∞** - –∫–ª–∞—Å—Å –∏ —Ç–µ–∫—Å—Ç (–î–û–ú–ò–ù–ò–†–£–ï–¢/–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ/–ë–∞–ª–∞–Ω—Å/...)
6. **–ë–ª–æ–∫ "–¢–ï–ö–£–©–ò–ï –•–ê–†–ê–ö–¢–ï–†–ò–°–¢–ò–ö–ò"** - –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ HP/ARM/DMG –¥–ª—è –æ–±–æ–∏—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π

#### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:
```javascript
function updateMetricsOnly() {
    // 1. –ü–æ–ª—É—á–∞–µ–º –Ω–æ–≤—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Å —É—á—ë—Ç–æ–º —Ä–µ–¥–∫–æ—Å—Ç–∏, —É—Ä–æ–≤–Ω—è –∏ —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏
    const atkStats = getCharacterStatsFromData(currentAttacker.name, atkRarityName, atkLevelValue);
    const defStats = getCharacterStatsFromData(currentDefender.name, defRarityName, defLevelValue);
    
    // 2. –°–æ–∑–¥–∞—ë–º –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π —Å –Ω–æ–≤—ã–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏
    const tempAttacker = { ...currentAttacker, hp: atkStats.hp, armor: atkStats.armor, dmg: atkStats.dmg };
    const tempDefender = { ...currentDefender, hp: defStats.hp, armor: defStats.armor, dmg: defStats.dmg };
    
    // 3. –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º –º–µ—Ç—Ä–∏–∫–∏ –±–æ—è
    const newMetrics = calculateMatchup(tempAttacker, tempDefender);
    
    // 4. –û–±–Ω–æ–≤–ª—è–µ–º –í–°–ï —ç–ª–µ–º–µ–Ω—Ç—ã DOM –±–µ–∑ –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∏ –≤—Å–µ–π –ø–∞–Ω–µ–ª–∏
    // - –ö–∞—Ä—Ç–æ—á–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π (HP, Armor, DMG)
    // - –ú–µ—Ç—Ä–∏–∫–∏ –∞—Ç–∞–∫–∏/–∑–∞—â–∏—Ç—ã
    // - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Ä–∞–∑–º–µ–Ω–∞
    // - –ë–ª–æ–∫ —Ç–µ–∫—É—â–∏—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
}
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –ø–æ–ª–∑—É–Ω–∫–æ–≤ —Ä–µ–¥–∫–æ—Å—Ç–∏/—É—Ä–æ–≤–Ω—è —Ç–µ–ø–µ—Ä—å:
- ‚úÖ –û–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
- ‚úÖ –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –º–µ—Ç—Ä–∏–∫–∏ –±–æ—è (Attack Efficiency, Defense Efficiency)
- ‚úÖ –û–±–Ω–æ–≤–ª—è—é—Ç—Å—è "–†–∞—É–Ω–¥—ã –¥–æ –ø–æ–±–µ–¥—ã"
- ‚úÖ –£—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –±–æ–Ω—É—Å—ã –æ—Ç —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏ —Å–æ–≥–ª–∞—Å–Ω–æ —Ä–µ–¥–∫–æ—Å—Ç–∏ –∏ —É—Ä–æ–≤–Ω—é
- ‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ –±–µ—Ä—É—Ç—Å—è –∏–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π –≤ data.json

## üìù –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã

### –ü—Ä–∏–º–µ—Ä 1: Marshal Dreir (Epic Level 35)
**–ë–∞–∑–æ–≤—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã –∞–∫—Ç–∏–≤–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:**
- HP: 1426
- Armor: 342
- Damage: 798 (—Å—Ä–µ–¥–Ω–µ–µ –∏–∑ 685-912)

**–ë–æ–Ω—É—Å—ã –æ—Ç —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏ (Epic ‚Üí –º–∞–∫—Å–∏–º—É–º Gold I):**
- HP: +875
- Armor: +183
- Damage: +366

**–ò—Ç–æ–≥–æ–≤—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- HP: 1426 + 875 = **2301**
- Armor: 342 + 183 = **525**
- Damage: 798 + 366 = **1164**

### –ü—Ä–∏–º–µ—Ä 2: Common Level 8 (–º–∞–∫—Å–∏–º—É–º Iron I)
**–ë–∞–∑–æ–≤—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- HP: 100
- Armor: 10
- Damage: 15

**–ë–æ–Ω—É—Å—ã –æ—Ç —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏ (Common Level 8 ‚Üí Iron I):**
- HP: +90 (Stone I+II+III + Iron I)
- Armor: +10
- Damage: +20

**–ò—Ç–æ–≥–æ–≤—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- HP: **190**
- Armor: **20**
- Damage: **35**

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –°—Ç–∞—Ä—ã–π —Ñ–∞–π–ª equipment_upgrades.json —Å–æ—Ö—Ä–∞–Ω—ë–Ω –∫–∞–∫:
`equipment_upgrades_old.json`

### –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
```javascript
let equipmentUpgrades = {};
```

### –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
1. `loadEquipmentUpgrades()` - –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
2. `getEquipmentTier(rarityName, level)` - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏—Ä–∞ —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏
3. `getEquipmentBonuses(rarityName, level)` - —Ä–∞—Å—á—ë—Ç –±–æ–Ω—É—Å–æ–≤

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
1. `syncAllData()` - –¥–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ loadEquipmentUpgrades()
2. `getCharacterStatsFromData()` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –±–æ–Ω—É—Å—ã –æ—Ç —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏
3. `updateMetricsOnly()` - –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∑–∞–ø–∏—Å—å –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤

## ‚úÖ Checklist –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á

- [x] –î–æ–±–∞–≤–∏—Ç—å `loadEquipmentUpgrades()` –≤ `syncAllData()`
- [x] –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `getEquipmentTier(rarityName, level)`
- [x] –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `getEquipmentBonuses(rarityName, level)`
- [x] –û–±–Ω–æ–≤–∏—Ç—å `getCharacterStatsFromData()` –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –±–æ–Ω—É—Å–æ–≤ —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏
- [x] –ü–û–õ–ù–û–°–¢–¨–Æ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å `updateMetricsOnly()` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö –º–µ—Ç—Ä–∏–∫
- [x] –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª equipment_upgrades.json —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª `test_equipment.html` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
- –ó–∞–≥—Ä—É–∑–∫–∏ equipment_upgrades.json
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ getEquipmentTier()
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ä–∞—Å—á—ë—Ç–∞ –±–æ–Ω—É—Å–æ–≤ getEquipmentBonuses()
- –ü—Ä–∏–º–µ—Ä–æ–≤ —Ä–∞—Å—á—ë—Ç–∞ —Ñ–∏–Ω–∞–ª—å–Ω—ã—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
