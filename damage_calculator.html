<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WH40K Tacticus - –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –£—Ä–æ–Ω–∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: #fff;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        
        .calculator {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .side {
            background: rgba(0,0,0,0.3);
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #ffd700;
        }
        
        .side h2 {
            margin-bottom: 15px;
            color: #ffd700;
            border-bottom: 2px solid #ffd700;
            padding-bottom: 10px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #ffeb3b;
        }
        
        select, input {
            width: 100%;
            padding: 10px;
            background: rgba(255,255,255,0.1);
            border: 1px solid #ffd700;
            border-radius: 5px;
            color: #fff;
            font-size: 14px;
        }
        
        select option {
            background: #1e3c72;
            color: #fff;
        }
        
        input:focus, select:focus {
            outline: none;
            background: rgba(255,255,255,0.2);
            box-shadow: 0 0 10px #ffd700;
        }
        
        .traits-display {
            background: rgba(0,0,0,0.5);
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            font-size: 12px;
            max-height: 150px;
            overflow-y: auto;
        }
        
        .trait-tag {
            display: inline-block;
            background: #ffd700;
            color: #000;
            padding: 5px 10px;
            border-radius: 3px;
            margin: 3px;
            font-size: 11px;
            font-weight: bold;
        }
        
        .calculations {
            background: rgba(0,0,0,0.3);
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #00ff00;
            grid-column: 1 / -1;
        }
        
        .calculation-step {
            background: rgba(0,0,0,0.5);
            padding: 15px;
            margin-bottom: 15px;
            border-left: 3px solid #00ff00;
            border-radius: 5px;
        }
        
        .calculation-step h3 {
            color: #00ff00;
            margin-bottom: 10px;
        }
        
        .calculation-step p {
            font-size: 14px;
            line-height: 1.6;
            color: #e0e0e0;
        }
        
        .formula {
            background: rgba(0,0,0,0.8);
            padding: 10px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            margin: 10px 0;
            font-size: 12px;
            color: #00ff00;
        }
        
        .result {
            background: linear-gradient(135deg, #00ff00 0%, #00cc00 100%);
            color: #000;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-size: 2em;
            font-weight: bold;
            margin-top: 20px;
        }
        
        .warning {
            background: rgba(255, 165, 0, 0.3);
            border-left: 3px solid #ff9800;
            padding: 10px;
            margin: 10px 0;
            border-radius: 3px;
            color: #ffb74d;
        }
        
        .success {
            background: rgba(0, 255, 0, 0.2);
            border-left: 3px solid #00ff00;
            padding: 10px;
            margin: 10px 0;
            border-radius: 3px;
            color: #00ff00;
        }
        
        .danger {
            background: rgba(255, 0, 0, 0.2);
            border-left: 3px solid #ff0000;
            padding: 10px;
            margin: 10px 0;
            border-radius: 3px;
            color: #ff6b6b;
        }
        
        button {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            color: #000;
            border: none;
            padding: 12px 30px;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            width: 100%;
            grid-column: 1 / -1;
            margin-top: 20px;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4);
        }
        
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 20px;
        }
        
        .comp-item {
            background: rgba(0,0,0,0.5);
            padding: 10px;
            border-radius: 5px;
            text-align: center;
        }
        
        .comp-item h4 {
            color: #ffeb3b;
            margin-bottom: 5px;
        }
        
        .comp-item p {
            font-size: 18px;
            color: #00ff00;
        }
        
        @media (max-width: 768px) {
            .calculator {
                grid-template-columns: 1fr;
            }
            
            .calculations {
                grid-column: 1;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚öîÔ∏è WH40K TACTICUS - –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –£—Ä–æ–Ω–∞ üéÆ</h1>
        
        <div class="calculator">
            <!-- ATTACKER SIDE -->
            <div class="side">
                <h2>üó°Ô∏è –ê–¢–ê–ö–£–Æ–©–ò–ô</h2>
                
                <div class="form-group">
                    <label>–í—ã–±–µ—Ä–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞:</label>
                    <select id="attackerSelect" onchange="updateAttacker()">
                        <option value="">-- –í—ã–±–µ—Ä–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ --</option>
                        <option value="dante">Dante (Legendary)</option>
                        <option value="typhus">Typhus (Legendary)</option>
                        <option value="galatian">Galatian (Unknown)</option>
                        <option value="titus">Titus (Epic)</option>
                        <option value="snotflogga">Snotflogga (Rare)</option>
                        <option value="kharn">Kharn (Legendary?)</option>
                        <option value="mephiston">Mephiston (Legendary)</option>
                        <option value="ahriman">Ahriman (Legendary)</option>
                        <option value="macer">Macer (?)</option>
                        <option value="custom">üîß –ö–∞—Å—Ç–æ–º–Ω—ã–π –ø–µ—Ä—Å–æ–Ω–∞–∂</option>
                    </select>
                </div>
                
                <div class="form-group" id="attackerStatsDiv" style="display:none;">
                    <label>HP:</label>
                    <input type="number" id="attackerHP" value="90" min="1" onchange="calculateDamage()">
                    
                    <label>DMG:</label>
                    <input type="number" id="attackerDMG" value="11" min="1" onchange="calculateDamage()">
                    
                    <label>ARM:</label>
                    <input type="number" id="attackerARM" value="23" min="0" onchange="calculateDamage()">
                    
                    <label>MOV:</label>
                    <input type="number" id="attackerMOV" value="4" min="1" onchange="calculateDamage()">
                    
                    <label>Hits:</label>
                    <input type="number" id="attackerHits" value="5" min="1" onchange="calculateDamage()">
                    
                    <label>Pierce %:</label>
                    <input type="number" id="attackerPierce" value="80" min="1" max="100" onchange="calculateDamage()">
                    
                    <label>Rarity Multiplier:</label>
                    <select id="attackerRarity" onchange="calculateDamage()">
                        <option value="1">Common (√ó1)</option>
                        <option value="2.2">Uncommon (√ó2.2)</option>
                        <option value="5.4">Rare (√ó5.4)</option>
                        <option value="11.5">Epic (√ó11.5)</option>
                        <option value="40">Legendary (√ó40)</option>
                        <option value="45">Mythic (√ó45)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Traits:</label>
                    <div class="traits-display" id="attackerTraits"></div>
                </div>
                
                <div class="form-group">
                    <label>Terrain Modifier:</label>
                    <select id="terrainMod" onchange="calculateDamage()">
                        <option value="1">–û–±—ã—á–Ω—ã–π (√ó1)</option>
                        <option value="1.5">High Ground (√ó1.5)</option>
                        <option value="0.5">Trench (√ó0.5)</option>
                    </select>
                </div>
            </div>
            
            <!-- DEFENDER SIDE -->
            <div class="side">
                <h2>üõ°Ô∏è –ó–ê–©–ò–©–ê–Æ–©–ò–ô–°–Ø</h2>
                
                <div class="form-group">
                    <label>–í—ã–±–µ—Ä–∏ –≤—Ä–∞–≥–∞:</label>
                    <select id="defenderSelect" onchange="updateDefender()">
                        <option value="">-- –í—ã–±–µ—Ä–∏ –≤—Ä–∞–≥–∞ --</option>
                        <option value="typhus">Typhus (Legendary)</option>
                        <option value="dante">Dante (Legendary)</option>
                        <option value="galatian">Galatian (Unknown)</option>
                        <option value="titus">Titus (Epic)</option>
                        <option value="snotflogga">Snotflogga (Rare)</option>
                        <option value="kharn">Kharn (Legendary?)</option>
                        <option value="mephiston">Mephiston (Legendary)</option>
                        <option value="ahriman">Ahriman (Legendary)</option>
                        <option value="macer">Macer (?)</option>
                        <option value="custom">üîß –ö–∞—Å—Ç–æ–º–Ω—ã–π –≤—Ä–∞–≥</option>
                    </select>
                </div>
                
                <div class="form-group" id="defenderStatsDiv" style="display:none;">
                    <label>HP:</label>
                    <input type="number" id="defenderHP" value="120" min="1" onchange="calculateDamage()">
                    
                    <label>ARM:</label>
                    <input type="number" id="defenderARM" value="25" min="0" onchange="calculateDamage()">
                    
                    <label>DMG:</label>
                    <input type="number" id="defenderDMG" value="18" min="1" onchange="calculateDamage()">
                    
                    <label>Rarity Multiplier:</label>
                    <select id="defenderRarity" onchange="calculateDamage()">
                        <option value="1">Common (√ó1)</option>
                        <option value="2.2">Uncommon (√ó2.2)</option>
                        <option value="5.4">Rare (√ó5.4)</option>
                        <option value="11.5">Epic (√ó11.5)</option>
                        <option value="40">Legendary (√ó40)</option>
                        <option value="45">Mythic (√ó45)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Traits:</label>
                    <div class="traits-display" id="defenderTraits"></div>
                </div>
            </div>
            
            <!-- CALCULATIONS -->
            <div class="calculations">
                <h2>üìä –ü–æ—à–∞–≥–æ–≤—ã–π –†–∞—Å—á–µ—Ç</h2>
                
                <div class="calculation-step">
                    <h3>–®–ê–ì 1: –ë–∞–∑–æ–≤–∞—è –§–æ—Ä–º—É–ª–∞</h3>
                    <div class="formula">DD = MAX[(DamVar - Armor) vs (DamVar √ó Pierce%)] √ó Terrain √ó Hits</div>
                    <p id="step1"></p>
                </div>
                
                <div class="calculation-step">
                    <h3>–®–ê–ì 2: DamVar = Damage √ó Rarity_Multiplier</h3>
                    <p id="step2"></p>
                </div>
                
                <div class="calculation-step">
                    <h3>–®–ê–ì 3: –í—ã–±–æ—Ä –º–∞–∫—Å–∏–º—É–º–∞ (–±—Ä–æ–Ω—è vs pierce)</h3>
                    <p id="step3"></p>
                </div>
                
                <div class="calculation-step">
                    <h3>–®–ê–ì 4: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ terrain –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤</h3>
                    <p id="step4"></p>
                </div>
                
                <div class="calculation-step">
                    <h3>–®–ê–ì 5: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É–¥–∞—Ä–æ–≤</h3>
                    <p id="step5"></p>
                </div>
                
                <div class="calculation-step">
                    <h3>–®–ê–ì 6: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ traits –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤</h3>
                    <p id="step6"></p>
                </div>
                
                <div class="calculation-step">
                    <h3>–®–ê–ì 7: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∑–∞—â–∏—Ç—ã –≤—Ä–∞–≥–∞ (Gravis, Resilient –∏ —Ç.–¥.)</h3>
                    <p id="step7"></p>
                </div>
                
                <div class="calculation-step">
                    <h3>–®–ê–ì 8: –§–ò–ù–ê–õ–¨–ù–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢</h3>
                    <div class="result" id="finalResult">–í—ã–±–µ—Ä–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π</div>
                </div>
                
                <div class="comparison">
                    <div class="comp-item">
                        <h4>–ê—Ç–∞–∫–∞ %</h4>
                        <p id="attackPercentage">--</p>
                    </div>
                    <div class="comp-item">
                        <h4>–ó–∞—â–∏—Ç–∞ %</h4>
                        <p id="defensePercentage">--</p>
                    </div>
                    <div class="comp-item">
                        <h4>–°—Ä–µ–¥–Ω–µ–µ %</h4>
                        <p id="averagePercentage">--</p>
                    </div>
                    <div class="comp-item">
                        <h4>–ò—Å—Ö–æ–¥</h4>
                        <p id="outcome">--</p>
                    </div>
                </div>
            </div>
            
            <button onclick="calculateDamage()" style="grid-column: 1 / -1;">üîÑ –†–ê–°–°–ß–ò–¢–ê–¢–¨ –£–†–û–ù</button>
        </div>
    </div>
    
    <script>
        // Database –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
        const characters = {
            dante: {
                name: 'Dante',
                hp: 90, dmg: 11, arm: 23, mov: 4,
                rarity: 40, // Legendary
                melee: { hits: 5, pierce: 80, type: 'Piercing' },
                traits: ['Flying', 'Deep Strike', 'Final Vengeance', 'Rapid Assault', 'Terrifying', 'Parry'],
                traitMods: { flying: true, deepStrike: true, finalVengeance: true, rapidAssault: 1 }
            },
            typhus: {
                name: 'Typhus',
                hp: 120, dmg: 18, arm: 25, mov: 3,
                rarity: 40, // Legendary
                melee: { hits: 1, pierce: 100, type: 'Psychic' },
                traits: ['Psyker', 'Summon', 'Resilient', 'Terminator Armour', 'Contagions of Nurgle'],
                traitMods: { psyker: true, summon: true, resilient: true, terminator: true }
            },
            galatian: {
                name: 'Galatian',
                hp: 200, dmg: 22, arm: 40, mov: 2,
                rarity: 1, // Unknown
                melee: { hits: 1, pierce: 5, type: 'Projectile' },
                traits: ['Vehicle', 'Overwatch', 'Mechanical'],
                traitMods: { overwatch: true, vehicle: true }
            },
            titus: {
                name: 'Titus',
                hp: 95, dmg: 25, arm: 23, mov: 3,
                rarity: 11.5, // Epic
                melee: { hits: 6, pierce: 40, type: 'Power' },
                traits: ['Martial Ka\'tah'],
                traitMods: { rapidAssault: 0 }
            },
            snotflogga: {
                name: 'Snotflogga',
                hp: 120, dmg: 30, arm: 18, mov: 2,
                rarity: 5.4, // Rare
                melee: { hits: 3, pierce: 1, type: 'Physical' },
                traits: ['Battle Fatigue', 'Summon', 'Diminutive'],
                traitMods: { battleFatigue: true, summon: true }
            },
            kharn: {
                name: 'Kharn',
                hp: 95, dmg: 30, arm: 20, mov: 3,
                rarity: 40,
                melee: { hits: 5, pierce: 50, type: 'Eviscerating' },
                traits: ['Final Vengeance', 'Rapid Assault', 'Deep Strike'],
                traitMods: { finalVengeance: true, rapidAssault: 1, deepStrike: true }
            },
            mephiston: {
                name: 'Mephiston',
                hp: 95, dmg: 10, arm: 18, mov: 3,
                rarity: 40,
                melee: { hits: 3, pierce: 100, type: 'Psychic' },
                traits: ['Rapid Assault', 'Psyker', 'Terrifying'],
                traitMods: { rapidAssault: 1, psyker: true, terrifying: true }
            },
            ahriman: {
                name: 'Ahriman',
                hp: 80, dmg: 30, arm: 20, mov: 3,
                rarity: 40,
                melee: { hits: 1, pierce: 25, type: 'Flame' },
                traits: ['Flying', 'Psyker', 'Weaver of Fates'],
                traitMods: { flying: true, psyker: true }
            },
            macer: {
                name: 'Macer',
                hp: 100, dmg: 20, arm: 30, mov: 3,
                rarity: 1,
                melee: { hits: 2, pierce: 20, type: 'Chain' },
                traits: ['Unstoppable', 'Aggressive Onslaught'],
                traitMods: { aggressiveOnslaught: true }
            }
        };
        
        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∞—Ç–∞–∫—É—é—â–µ–≥–æ
        function updateAttacker() {
            const select = document.getElementById('attackerSelect').value;
            if (select && characters[select]) {
                const char = characters[select];
                document.getElementById('attackerHP').value = char.hp;
                document.getElementById('attackerDMG').value = char.dmg;
                document.getElementById('attackerARM').value = char.arm;
                document.getElementById('attackerMOV').value = char.mov;
                document.getElementById('attackerHits').value = char.melee.hits;
                document.getElementById('attackerPierce').value = char.melee.pierce;
                document.getElementById('attackerRarity').value = char.rarity;
                document.getElementById('attackerStatsDiv').style.display = 'block';
                updateTraitsDisplay('attacker', char.traits);
                calculateDamage();
            } else if (select === 'custom') {
                document.getElementById('attackerStatsDiv').style.display = 'block';
            }
        }
        
        function updateDefender() {
            const select = document.getElementById('defenderSelect').value;
            if (select && characters[select]) {
                const char = characters[select];
                document.getElementById('defenderHP').value = char.hp;
                document.getElementById('defenderDMG').value = char.dmg;
                document.getElementById('defenderARM').value = char.arm;
                document.getElementById('defenderRarity').value = char.rarity;
                document.getElementById('defenderStatsDiv').style.display = 'block';
                updateTraitsDisplay('defender', char.traits);
                calculateDamage();
            } else if (select === 'custom') {
                document.getElementById('defenderStatsDiv').style.display = 'block';
            }
        }
        
        function updateTraitsDisplay(side, traits) {
            const div = document.getElementById(side === 'attacker' ? 'attackerTraits' : 'defenderTraits');
            div.innerHTML = traits.map(t => `<span class="trait-tag">${t}</span>`).join('');
        }
        
        // –ì–õ–ê–í–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø –†–ê–°–ß–ï–¢–ê
        function calculateDamage() {
            // –ü–æ–ª—É—á–∞—é –¥–∞–Ω–Ω—ã–µ
            const attackerDMG = parseFloat(document.getElementById('attackerDMG').value) || 0;
            const attackerHits = parseFloat(document.getElementById('attackerHits').value) || 1;
            const attackerPierce = parseFloat(document.getElementById('attackerPierce').value) || 1;
            const attackerRarity = parseFloat(document.getElementById('attackerRarity').value) || 1;
            const terrain = parseFloat(document.getElementById('terrainMod').value) || 1;
            
            const defenderARM = parseFloat(document.getElementById('defenderARM').value) || 0;
            const defenderHP = parseFloat(document.getElementById('defenderHP').value) || 100;
            const defenderDMG = parseFloat(document.getElementById('defenderDMG').value) || 10;
            const defenderRarity = parseFloat(document.getElementById('defenderRarity').value) || 1;
            
            // –®–ê–ì 1: DamVar = Damage √ó Rarity
            const damVar = attackerDMG * attackerRarity;
            document.getElementById('step2').innerHTML = 
                `<strong>${attackerDMG}</strong> √ó <strong>${attackerRarity}</strong> = <strong>${damVar.toFixed(1)}</strong>`;
            
            // –®–ê–ì 2: –í—ã—á–∏—Å–ª—è—é –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞
            const variant1 = damVar - defenderARM;
            const variant2 = damVar * (attackerPierce / 100);
            const damageAfterArmor = Math.max(variant1, variant2);
            
            document.getElementById('step3').innerHTML = 
                `–í–∞—Ä–∏–∞–Ω—Ç 1 (–±—Ä–æ–Ω—è): ${damVar.toFixed(1)} - ${defenderARM} = <strong>${variant1.toFixed(1)}</strong><br>
                 –í–∞—Ä–∏–∞–Ω—Ç 2 (pierce): ${damVar.toFixed(1)} √ó ${attackerPierce}% = <strong>${variant2.toFixed(1)}</strong><br>
                 –í—ã–±–∏—Ä–∞–µ–º MAX: <strong>${damageAfterArmor.toFixed(1)}</strong>`;
            
            // –®–ê–ì 3: Terrain
            const damageWithTerrain = damageAfterArmor * terrain;
            document.getElementById('step4').innerHTML = 
                `${damageAfterArmor.toFixed(1)} √ó ${terrain} (terrain) = <strong>${damageWithTerrain.toFixed(1)}</strong>`;
            
            // –®–ê–ì 4: Hits
            const totalDamage = damageWithTerrain * attackerHits;
            document.getElementById('step5').innerHTML = 
                `${damageWithTerrain.toFixed(1)} √ó ${attackerHits} (hits) = <strong>${totalDamage.toFixed(1)}</strong>`;
            
            // –®–ê–ì 5: Traits –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –∞—Ç–∞–∫—É—é—â–µ–≥–æ
            let traitMultiplier = 1.0;
            const attackerSelect = document.getElementById('attackerSelect').value;
            if (attackerSelect && characters[attackerSelect]) {
                if (characters[attackerSelect].traitMods.terrifying) {
                    traitMultiplier *= 0.7; // –≤—Ä–∞–≥ –ø–æ–ª—É—á–∞–µ—Ç -30% —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
                }
            }
            
            const damageAfterTraits = totalDamage * traitMultiplier;
            document.getElementById('step6').innerHTML = 
                `${totalDamage.toFixed(1)} √ó ${traitMultiplier} (traits multiplier) = <strong>${damageAfterTraits.toFixed(1)}</strong>`;
            
            // –®–ê–ì 6: –ó–∞—â–∏—Ç–∞ –≤—Ä–∞–≥–∞
            let defenseMultiplier = 1.0;
            const defenderSelect = document.getElementById('defenderSelect').value;
            if (defenderSelect && characters[defenderSelect]) {
                if (characters[defenderSelect].traitMods.resilient) {
                    defenseMultiplier *= 0.8; // -20% —É—Ä–æ–Ω–∞
                }
            }
            
            const finalDamage = damageAfterTraits * defenseMultiplier;
            document.getElementById('step7').innerHTML = 
                `${damageAfterTraits.toFixed(1)} √ó ${defenseMultiplier} (defender defense) = <strong>${finalDamage.toFixed(1)}</strong>`;
            
            // –§–ò–ù–ê–õ–¨–ù–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢
            document.getElementById('finalResult').textContent = `${finalDamage.toFixed(1)} —É—Ä–æ–Ω–∞`;
            
            // –ú–ï–¢–†–ò–ö–ò
            const attackPercent = (finalDamage / defenderHP) * 100;
            const defensePercent = 100 - (defenderDMG * defenderRarity / 90) * 100; // –ø—Ä–∏–º–µ—Ä–Ω–æ
            const average = (attackPercent + defensePercent) / 2;
            
            document.getElementById('attackPercentage').textContent = `${attackPercent.toFixed(1)}%`;
            document.getElementById('defensePercentage').textContent = `${Math.max(0, defensePercent).toFixed(1)}%`;
            document.getElementById('averagePercentage').textContent = `${average.toFixed(1)}%`;
            
            // –ò–°–•–û–î
            let outcome = '';
            if (average > 70) {
                outcome = '<span style="color: #00ff00;">‚úÖ –í–´–ò–ì–†–´–®</span>';
            } else if (average > 45) {
                outcome = '<span style="color: #ffeb3b;">‚öñÔ∏è –†–ê–í–ù–û</span>';
            } else {
                outcome = '<span style="color: #ff6b6b;">‚ùå –ü–†–û–ò–ì–†–´–®</span>';
            }
            document.getElementById('outcome').innerHTML = outcome;
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        window.onload = function() {
            calculateDamage();
        };
    </script>
</body>
</html>